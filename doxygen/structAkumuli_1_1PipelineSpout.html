<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Akumuli: Akumuli::PipelineSpout Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Akumuli
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceAkumuli.html">Akumuli</a></li><li class="navelem"><a class="el" href="structAkumuli_1_1PipelineSpout.html">PipelineSpout</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structAkumuli_1_1PipelineSpout-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Akumuli::PipelineSpout Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ingestion__pipeline_8h_source.html">ingestion_pipeline.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Akumuli::PipelineSpout:</div>
<div class="dyncontent">
 <div class="center">
  <img src="structAkumuli_1_1PipelineSpout.png" usemap="#Akumuli::PipelineSpout_map" alt=""/>
  <map id="Akumuli::PipelineSpout_map" name="Akumuli::PipelineSpout_map">
<area href="structAkumuli_1_1ProtocolConsumer.html" alt="Akumuli::ProtocolConsumer" shape="rect" coords="0,0,166,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAkumuli_1_1PipelineSpout_1_1Padding.html">Padding</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAkumuli_1_1PipelineSpout_1_1TVal.html">TVal</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a697adb0ddc660136bf0ca2a390347326"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="structAkumuli_1_1PipelineSpout.html#a697adb0ddc660136bf0ca2a390347326ae98289561bc1a3f2d6c227d3663cce1c">POOL_SIZE</a> = 0x200, 
<b>QCAP</b> = 0x10
 }</td></tr>
<tr class="separator:a697adb0ddc660136bf0ca2a390347326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6744428ca1337eeea660bef78531ec1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af6744428ca1337eeea660bef78531ec1"></a>
typedef std::atomic&lt; uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>SpoutCounter</b></td></tr>
<tr class="separator:af6744428ca1337eeea660bef78531ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13de5f0c129fcd851c4f81c6529e9ee9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13de5f0c129fcd851c4f81c6529e9ee9"></a>
typedef std::shared_ptr&lt; <a class="el" href="structAkumuli_1_1PipelineSpout_1_1TVal.html">TVal</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>PVal</b></td></tr>
<tr class="separator:a13de5f0c129fcd851c4f81c6529e9ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10582b1508d75e21fa85eb5d97597bf8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10582b1508d75e21fa85eb5d97597bf8"></a>
typedef queue&lt; <a class="el" href="structAkumuli_1_1PipelineSpout_1_1TVal.html">TVal</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>Queue</b></td></tr>
<tr class="separator:a10582b1508d75e21fa85eb5d97597bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78d1bf282bd7e419c3c34603cdd5b18d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78d1bf282bd7e419c3c34603cdd5b18d"></a>
typedef std::shared_ptr&lt; Queue &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>PQueue</b></td></tr>
<tr class="separator:a78d1bf282bd7e419c3c34603cdd5b18d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92a3448d1bd65befb0e71f994206d41f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92a3448d1bd65befb0e71f994206d41f"></a>
typedef std::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="structAkumuli_1_1DbConnection.html">DbConnection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>PDatabase</b></td></tr>
<tr class="separator:a92a3448d1bd65befb0e71f994206d41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a600a70cc60620d0ee7498c9f45d6770e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a600a70cc60620d0ee7498c9f45d6770e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>PipelineSpout</b> (std::shared_ptr&lt; Queue &gt; q, BackoffPolicy bp, std::shared_ptr&lt; <a class="el" href="structAkumuli_1_1DbConnection.html">DbConnection</a> &gt; con)</td></tr>
<tr class="separator:a600a70cc60620d0ee7498c9f45d6770e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52c4667348176a9c5d9db2ea171f4edc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a52c4667348176a9c5d9db2ea171f4edc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_error_cb</b> (<a class="el" href="namespaceAkumuli.html#aa60c7495aa1651fa68f187147e5d7bc6">PipelineErrorCb</a> cb)</td></tr>
<tr class="separator:a52c4667348176a9c5d9db2ea171f4edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab42dd0107bb6b02c0f84675fb08989b8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab42dd0107bb6b02c0f84675fb08989b8"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>write</b> (const aku_Sample &amp;sample)</td></tr>
<tr class="separator:ab42dd0107bb6b02c0f84675fb08989b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e079c4e9e7616de6d1fec5aeafbfa32"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e079c4e9e7616de6d1fec5aeafbfa32"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>add_bulk_string</b> (const Byte *buffer, size_t n)</td></tr>
<tr class="separator:a9e079c4e9e7616de6d1fec5aeafbfa32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46db611e152c1e184cdd8275358516a3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46db611e152c1e184cdd8275358516a3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAkumuli_1_1PipelineSpout.html#a46db611e152c1e184cdd8275358516a3">get_index_of_empty_slot</a> ()</td></tr>
<tr class="memdesc:a46db611e152c1e184cdd8275358516a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserve index for the next <a class="el" href="structAkumuli_1_1PipelineSpout_1_1TVal.html">TVal</a> in the pool or negative value on error. <br/></td></tr>
<tr class="separator:a46db611e152c1e184cdd8275358516a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a594f36ae21fa409392849a0d0611d4f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAkumuli_1_1PipelineSpout.html#a594f36ae21fa409392849a0d0611d4f3">get_error</a> (std::ostream &amp;ostr)</td></tr>
<tr class="separator:a594f36ae21fa409392849a0d0611d4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28131629f9ccfef71b5c8204ca6dbd7e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a28131629f9ccfef71b5c8204ca6dbd7e"></a>
aku_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAkumuli_1_1PipelineSpout.html#a28131629f9ccfef71b5c8204ca6dbd7e">series_to_param_id</a> (const char *str, size_t strlen, aku_Sample *sample)</td></tr>
<tr class="memdesc:a28131629f9ccfef71b5c8204ca6dbd7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert series name to param id. <br/></td></tr>
<tr class="separator:a28131629f9ccfef71b5c8204ca6dbd7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45c245f5b75951dac93e66aec61a3128"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAkumuli_1_1PipelineSpout.html#a45c245f5b75951dac93e66aec61a3128">is_empty</a> () const </td></tr>
<tr class="separator:a45c245f5b75951dac93e66aec61a3128"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a680630483b05d3f7aeff68f12803c82d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a680630483b05d3f7aeff68f12803c82d"></a>
SpoutCounter&#160;</td><td class="memItemRight" valign="bottom"><b>created_</b></td></tr>
<tr class="separator:a680630483b05d3f7aeff68f12803c82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadda4f86205bdbee0b5827086ad12e80"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aadda4f86205bdbee0b5827086ad12e80"></a>
<a class="el" href="structAkumuli_1_1PipelineSpout_1_1Padding.html">Padding</a>&#160;</td><td class="memItemRight" valign="bottom"><b>pad0</b></td></tr>
<tr class="separator:aadda4f86205bdbee0b5827086ad12e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecceff312942eb606bebf97a071f3f0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aecceff312942eb606bebf97a071f3f0d"></a>
SpoutCounter&#160;</td><td class="memItemRight" valign="bottom"><b>deleted_</b></td></tr>
<tr class="separator:aecceff312942eb606bebf97a071f3f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd4f123ef244d66e1f10af32685b5c73"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd4f123ef244d66e1f10af32685b5c73"></a>
std::vector&lt; PVal &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>pool_</b></td></tr>
<tr class="separator:afd4f123ef244d66e1f10af32685b5c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd8970b66137eda230a461f9b095cea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4cd8970b66137eda230a461f9b095cea"></a>
<a class="el" href="structAkumuli_1_1PipelineSpout_1_1Padding.html">Padding</a>&#160;</td><td class="memItemRight" valign="bottom"><b>pad1</b></td></tr>
<tr class="separator:a4cd8970b66137eda230a461f9b095cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad02ffc85ea24b49609c71a58b884d8d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad02ffc85ea24b49609c71a58b884d8d4"></a>
PQueue&#160;</td><td class="memItemRight" valign="bottom"><b>queue_</b></td></tr>
<tr class="separator:ad02ffc85ea24b49609c71a58b884d8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29eee0c00b9683292f6a50a2316bcd37"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a29eee0c00b9683292f6a50a2316bcd37"></a>
const BackoffPolicy&#160;</td><td class="memItemRight" valign="bottom"><b>backoff_</b></td></tr>
<tr class="separator:a29eee0c00b9683292f6a50a2316bcd37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9bdfde145e7e548d3d7c7805e075ac7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9bdfde145e7e548d3d7c7805e075ac7"></a>
<a class="el" href="structAkumuli_1_1Logger.html">Logger</a>&#160;</td><td class="memItemRight" valign="bottom"><b>logger_</b></td></tr>
<tr class="separator:ac9bdfde145e7e548d3d7c7805e075ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd8c21c2ebe3cc706df71c706ae8e85"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afbd8c21c2ebe3cc706df71c706ae8e85"></a>
<a class="el" href="namespaceAkumuli.html#aa60c7495aa1651fa68f187147e5d7bc6">PipelineErrorCb</a>&#160;</td><td class="memItemRight" valign="bottom"><b>on_error_</b></td></tr>
<tr class="separator:afbd8c21c2ebe3cc706df71c706ae8e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a012bb4c9543b78f206955514f913437b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a012bb4c9543b78f206955514f913437b"></a>
PDatabase&#160;</td><td class="memItemRight" valign="bottom"><b>db_</b></td></tr>
<tr class="separator:a012bb4c9543b78f206955514f913437b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pipeline's spout. Object of this class can be used to ingest data to pipeline. It should be connected with <a class="el" href="classAkumuli_1_1IngestionPipeline.html">IngestionPipeline</a> instance with the shared queue. Pooling is used to simplify allocator's life. All TVals should be deleted in the same thread where they was created. This shuld minimize contention inside allocator and limit overall memory usage (no need to create pool of objects beforehand). </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a697adb0ddc660136bf0ca2a390347326"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a697adb0ddc660136bf0ca2a390347326ae98289561bc1a3f2d6c227d3663cce1c"></a>POOL_SIZE</em>&#160;</td><td class="fielddoc">
<p>PVal pool size. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a594f36ae21fa409392849a0d0611d4f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Akumuli::PipelineSpout::get_error </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>ostr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dump all errors to ostr or report that everything is OK </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ostr</td><td>stream to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a45c245f5b75951dac93e66aec61a3128"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Akumuli::PipelineSpout::is_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if all <a class="el" href="structAkumuli_1_1PipelineSpout_1_1TVal.html">TVal</a>'s is processed </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>akumulid/<a class="el" href="ingestion__pipeline_8h_source.html">ingestion_pipeline.h</a></li>
<li>akumulid/ingestion_pipeline.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 19 2016 18:02:42 for Akumuli by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
